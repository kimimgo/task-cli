# DevSwarm Dependency Graph
# task-cli: CLI 기반 할일 관리 도구

version: "1.0"
project_id: "task-cli"

# 설계 태스크 (Phase 0에서 완료됨)
design_tasks:
  - id: DESIGN-001
    name: "Core Models 설계"
    description: "Task, Priority, Status 모델 정의"
    completed: true

  - id: DESIGN-002
    name: "Storage Layer 설계"
    description: "SQLite repository 인터페이스 정의"
    completed: true

  - id: DESIGN-003
    name: "CLI 인터페이스 설계"
    description: "add, list, done, delete 명령어 정의"
    completed: true

# 구현 태스크 (병렬 실행 대상)
implementation_tasks:
  # 독립 태스크 - 병렬 실행 가능
  - id: IMPL-001
    name: "Core Models 구현"
    type: backend
    description: |
      Task 모델 및 관련 Enum 구현
      - Task dataclass (id, title, status, priority, created_at)
      - Priority enum (LOW, MEDIUM, HIGH)
      - Status enum (PENDING, DONE)
    dependencies:
      - DESIGN-001
    outputs:
      - src/models.py
      - tests/test_models.py
    weight: 1

  # IMPL-001 의존
  - id: IMPL-002
    name: "Storage Layer 구현"
    type: backend
    description: |
      SQLite 기반 TaskRepository 구현
      - create_task() -> Task
      - get_all_tasks() -> List[Task]
      - get_task(id) -> Optional[Task]
      - update_task(task) -> Task
      - delete_task(id) -> bool
    dependencies:
      - IMPL-001
      - DESIGN-002
    outputs:
      - src/repository.py
      - tests/test_repository.py
    weight: 2

  # IMPL-002 의존
  - id: IMPL-003
    name: "CLI Commands 구현"
    type: backend
    description: |
      argparse 기반 CLI 명령어 구현
      - task add "title" [--priority high]
      - task list [--status pending]
      - task done <id>
      - task delete <id>
    dependencies:
      - IMPL-002
      - DESIGN-003
    outputs:
      - src/cli.py
      - src/__main__.py
      - tests/test_cli.py
    weight: 2

  # 최종 통합 테스트
  - id: IMPL-004
    name: "Integration Tests"
    type: test
    description: |
      전체 워크플로우 E2E 테스트
      - 태스크 생성 → 조회 → 완료 → 삭제 시나리오
      - 에러 케이스 테스트
    dependencies:
      - IMPL-003
    outputs:
      - tests/test_integration.py
    weight: 1

# 의존성 그래프 (시각화용)
#
#   DESIGN-001 ─┐
#               ├──▶ IMPL-001 ──▶ IMPL-002 ──▶ IMPL-003 ──▶ IMPL-004
#   DESIGN-002 ─┘                    │
#                                    │
#   DESIGN-003 ──────────────────────┘
#
# 병렬 실행 가능 포인트:
# - IMPL-001: 의존성 없음 (즉시 실행)
# - IMPL-002: IMPL-001 완료 후
# - IMPL-003: IMPL-002 완료 후
# - IMPL-004: IMPL-003 완료 후
